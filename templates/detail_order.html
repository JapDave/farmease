{% extends is_admin|yesno:"admin/index_base.html,index_base.html" %}
{% load static %}
{% load i18n %}
{% load tagger %}

{% block title %}Detail|Order{% endblock title %}

{% block head %}
   
   <link rel="stylesheet" href="{% static 'assets/css/style.css' %}">
{% endblock head %}

{% block body %}
   <div class="container-fluid">
      <div class="row">

         <!-- Area Chart -->
         <div class="col-xl-12 col-lg-12">
            <div class="card shadow mb-4">
                 <!-- Card Header - Dropdown -->
                 <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">                   
                     <h5 class="m-0 font-weight-bold text-primary">{% trans 'Order Detail' %}</h5>     
                 </div>
                 <!-- Card Body -->
                 <div class="card-body">
                     <div class="chart-area">
                        {% if msg %}
                           <p class="text-danger">{{msg}}</p>
                           {% else %}
                           <div class="d-flex flex-column justify-content-center align-items-center" id="order-heading">
                              <div class="h4"></div>
                          </div>
                          <div class="wrapper bg-white">
                              <div class="table-responsive">
                                  <table class="table table-borderless">
                                      <thead>
                                          <tr class= "text-muted">
                                              <th scope="col"> {% trans "Product" %}</th>
                                              <th scope="col" class="text-right">{% trans "Price" %}</th>
                                          </tr>
                                      </thead>
                                      <tbody>
                                       {% for item in order.items %}
                                          <tr>
                                             <th > 
                                                <div class="d-flex justify-content-start align-items-center list py-1">
                                                   <div><b>{{item.qty}} X</b></div>
                                                   
                                                   <div class="mx-3"> <img src="
                                                         {% if is_admin %}
                                                         {{item.product.image}}
                                                            {% else %}
                                                            {{item.product.image.url}}
                                                         {% endif %}
                                                      "  class="rounded-circle" width="50" height="50"> </div>
                                                   <div class="order-item">
                                                      {% if lan == "en" %}
                                                         {{item.product.en.name}}
                                                         {% else %}
                                                            {{item.product.gu.name}}
                                                      {% endif %}      
                                         
                                                   </div> 
                                                </div>
                                            </th>
                                              <td class="text-right"><b>&#8377 {% widthratio item.qty 1 item.product.price %}/~</b></td> 
                                          </tr>
                                       {% endfor %}
                                      </tbody>
                                  </table>
                              </div>
                             
                              <div class="pt-2 border-bottom mb-3"></div>
                              <div class="d-flex justify-content-start align-items-center pl-3">
                                  <div class="text-muted">{% trans "payment Method" %}</div>
                                  <div class="ml-auto">
                                    {% if order.payment_method == 0 %}Cash On Delivery
                                       {% else %}
                                       Online
                                    {% endif %}    
                                 </div>
                              </div>
                             
                              <div class="d-flex justify-content-start align-items-center pl-3 py-3 mb-4 border-bottom">
                                  <div class="text-muted"> {% trans "Total Amount" %} </div>
                                  <div class="ml-auto h5 text-dark"> &#8377 {{order.total}}/~ </div>
                              </div>
                              <div class="row border rounded p-1 my-3">
                                  <div class="col-md-6 py-3">
                                      <div class="d-flex flex-column align-items start"> <b>{% trans "Shipping Address" %}</b>
                                          <p class="text-justify pt-2">{{order.address.postal_address}}</p>     
                                      </div>
                                  </div>
                              </div>
                              <div class="row border rounded p-1 my-3">
                                 <div class="col-md-6 py-3">
                                     <div class="d-flex flex-column align-items start"> <b>{% trans "Order Status" %}</b>
                                          {% if order.status == '0' %}<p class="text-justify pt-2 text-secondary"> Pending</p>{% endif %}    
                                          {% if order.status == '1' %}<p class="text-justify pt-2 text-success"> Approved</p>{% endif %}     
                                          {% if order.status == '2' %}<p class="text-justify pt-2 text-info">Dispatched</p>{% endif %}     
                                          {% if order.status == '3' %}<p class="text-justify pt-2 text-primary"> Delievered</p>{% endif %}     
                                          {% if order.status == '4' %}<p class="text-justify pt-2 text-danger"> Cancelled</p>{% endif %}    
                                     </div>
                                 </div>
                             </div>
                             {% if not is_admin %}
                              <div class="card-footer py-3 d-flex flex-row align-items-center justify-content-end">                   
                                 <a href="{% url 'updateorder' order|private:'_id' %}" class="btn btn-primary btn-icon-split m-1">
                                    <span class="icon text-white-50">
                                       <p class="text-light">{% trans "Edit" %}</p>
                                    </span>
                                 </a>

                                 <a href="{% url 'deleteorder' order|private:'_id' %}" class="btn btn-danger btn-icon-split m-1">
                                    <span class="icon text-white-50">
                                       <p class="text-light">{% trans "Delete" %}</p>
                                    </span>
                                 </a>
                              </div>
                          {% endif %}
                          </div>
                        {% endif %}                    
                     </div>
                 </div>
            </div>
         </div>
      </div>  
    
   </div>

{% endblock body %}